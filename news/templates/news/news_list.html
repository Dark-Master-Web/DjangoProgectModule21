{% extends 'default.html' %}
{% load custom_filters %}

{% block title %}–í—Å–µ –Ω–æ–≤–æ—Å—Ç–∏{% endblock %}

{% block content %}
<h1>–ü–æ—Å–ª–µ–¥–Ω–∏–µ –Ω–æ–≤–æ—Å—Ç–∏</h1>

<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem;">
    <p><strong>–í—Å–µ–≥–æ –Ω–æ–≤–æ—Å—Ç–µ–π: {{ paginator.count }}</strong></p>
    <div>
        <a href="{% url 'news_search' %}" style="margin-right: 1rem; color: #3498db;">–ü–æ–∏—Å–∫</a>
        <a href="{% url 'news_create' %}" style="background: #27ae60; color: white; padding: 0.5rem 1rem; text-decoration: none; border-radius: 3px;">–î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤–æ—Å—Ç—å</a>
    </div>
</div>

{% if news_list %}
    <table style="width: 100%; border-collapse: collapse; margin-top: 1rem;">
        <thead>
            <tr style="background-color: #34495e; color: white;">
                <th style="padding: 12px; text-align: left; border: 1px solid #ddd;">–ó–∞–≥–æ–ª–æ–≤–æ–∫</th>
                <th style="padding: 12px; text-align: center; border: 1px solid #ddd; width: 120px;">–î–∞—Ç–∞</th>
                <th style="padding: 12px; text-align: left; border: 1px solid #ddd;">–¢–µ–∫—Å—Ç</th>
                <th style="padding: 12px; text-align: center; border: 1px solid #ddd; width: 150px;">–î–µ–π—Å—Ç–≤–∏—è</th>
            </tr>
        </thead>
        <tbody>
            {% for news in news_list %}
            <tr style="background-color: {% if forloop.counter|divisibleby:2 %}#f8f9fa{% else %}white{% endif %};">
                <td style="padding: 12px; border: 1px solid #ddd;">
                    <a href="{% url 'news_detail' news.id %}" style="text-decoration: none; color: #2c3e50; font-weight: bold;">
                        {{ news.title|censor }}
                    </a>
                </td>
                <td style="padding: 12px; border: 1px solid #ddd; text-align: center;">
                    {{ news.created_at|date:"d.m.Y" }}
                </td>
                <td style="padding: 12px; border: 1px solid #ddd;">
                    {{ news.content|truncatewords:20|censor }}
                </td>
                <td style="padding: 12px; border: 1px solid #ddd; text-align: center;">
                    <a href="{% url 'news_edit' news.id %}" style="color: #f39c12; margin-right: 0.5rem;">‚úèÔ∏è</a>
                    <a href="{% url 'news_delete' news.id %}" style="color: #e74c3c;">üóëÔ∏è</a>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>

    {# –ü–∞–≥–∏–Ω–∞—Ü–∏—è #}
    <div style="margin-top: 2rem; text-align: center;">
        {% if page_obj.has_previous %}
            <a href="?page=1" style="margin-right: 1rem; color: #3498db;">¬´ –ü–µ—Ä–≤–∞—è</a>
            <a href="?page={{ page_obj.previous_page_number }}" style="margin-right: 1rem; color: #3498db;">‚Äπ –ü—Ä–µ–¥—ã–¥—É—â–∞—è</a>
        {% endif %}

        <span style="margin: 0 1rem;">
            –°—Ç—Ä–∞–Ω–∏—Ü–∞ {{ page_obj.number }} –∏–∑ {{ page_obj.paginator.num_pages }}
        </span>

        {% if page_obj.has_next %}
            <a href="?page={{ page_obj.next_page_number }}" style="margin-left: 1rem; color: #3498db;">–°–ª–µ–¥—É—é—â–∞—è ‚Ä∫</a>
            <a href="?page={{ page_obj.paginator.num_pages }}" style="margin-left: 1rem; color: #3498db;">–ü–æ—Å–ª–µ–¥–Ω—è—è ¬ª</a>
        {% endif %}
    </div>

{% else %}
    <div style="text-align: center; padding: 2rem; background-color: #f8f9fa; border-radius: 5px; margin-top: 1rem;">
        <p>–ù–æ–≤–æ—Å—Ç–µ–π –ø–æ–∫–∞ –Ω–µ—Ç.</p>
        <p><a href="{% url 'news_create' %}" style="color: #3498db;">–î–æ–±–∞–≤–∏—Ç—å –ø–µ—Ä–≤—É—é –Ω–æ–≤–æ—Å—Ç—å</a></p>
    </div>
{% endif %}
{% endblock %}